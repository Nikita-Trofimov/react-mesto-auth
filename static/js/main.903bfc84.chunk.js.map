{"version":3,"sources":["components/Header.js","contexts/CurrentUserContext.js","images/imgNotFound.png","components/Card.js","components/Main.js","components/ImagePopup.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/Login.js","components/Register.js","components/Footer.js","components/ProtectedRoute.js","images/registration_ok.svg","images/registration_err.svg","components/InfoTooltip.js","utils/api.js","utils/constants.js","utils/apiAuth.js","components/App.js","index.js"],"names":["Header","userEmail","onLogOut","className","exact","path","to","onClick","CurrentUserContext","React","createContext","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","onError","evt","target","src","errorImg","link","alt","name","type","length","Main","onEditProfile","onAddPlace","onEditAvatar","cards","avatar","about","map","ImagePopup","props","onClose","PopupWithForm","isOpen","title","onSubmit","noValidate","children","submitButtonTitle","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","useEffect","undefined","preventDefault","placeholder","value","onChange","required","minLength","maxLength","EditAvatarPopup","useRef","current","ref","AddPlacePopup","setLink","Login","onLogin","email","setEmail","password","setPassword","autoComplete","Register","onRegister","Footer","Date","getFullYear","ProtectedRoute","Component","component","loggedIn","InfoTooltip","isRegistration","registrationOk","registrationErr","api","options","this","_baseUrl","baseUrl","_headers","headers","res","ok","json","Promise","reject","status","statusText","url","fetch","then","_checkResponse","_fetch","method","body","JSON","stringify","cardId","likeCard","removeLike","authorization","apiAuth","token","App","setloggedIn","isEditProfilePopupOpen","setEditProfilePopupOpenActive","isAddPlacePopupOpen","setAddPlacePopupOpenActive","isEditAvatarPopupOpen","setIsEditAvatarPopupOpenActive","selectedCard","setSelectedCard","setCurrentUser","setCards","isInfoTooltipPopupOpen","setIsInfoTooltipPopupOpen","setIsRegistration","setUserEmail","history","useHistory","closeAllPopups","getInitialCards","catch","err","console","log","getProfile","profile","localStorage","getItem","checkToken","data","tokenCheck","push","Provider","removeItem","changeLikeCardStatus","newCard","state","c","removeCard","filter","register","signin","setItem","updateProfile","addCard","udpateAvatar","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.903bfc84.chunk.js","sourcesContent":["import {Switch, Route, Link} from \"react-router-dom\";\r\nfunction Header({userEmail, onLogOut}) {\r\n  return (\r\n    <header className=\"header\">\r\n      <div className=\"header__logo\"></div>\r\n      <Switch>\r\n        <Route exact path=\"/\">\r\n            <nav className=\"header__authentication\">\r\n              <span className=\"header__email\">{userEmail}</span>\r\n              <Link to=\"/sign-in\" onClick={onLogOut} className=\"header__authentication-link\">Выйти</Link>  \r\n            </nav>\r\n        </Route>\r\n        <Route path=\"/sign-up\">\r\n            <nav className=\"header__authentication\">\r\n              <Link to=\"/sign-in\" className=\"header__authentication-link\">Войти</Link>\r\n            </nav>\r\n        </Route>\r\n        <Route path=\"/sign-in\">\r\n            <nav className=\"header__authentication\">\r\n              <Link to=\"/sign-up\" className=\"header__authentication-link\">Регистрация</Link>  \r\n            </nav>\r\n        </Route>\r\n      </Switch>\r\n    </header>    \r\n  )\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();","export default __webpack_public_path__ + \"static/media/imgNotFound.323f7926.png\";","import { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport React from 'react';\r\nimport errorImg from '../images/imgNotFound.png';\r\n\r\nfunction Card ({ card, onCardClick, onCardLike, onCardDelete }){\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const isOwn = card.owner._id === currentUser._id;\r\n  const cardDeleteButtonClassName = (\r\n    `card__remove ${isOwn ? '' : 'card__remove_display-none'}`\r\n  ); \r\n  const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n  const cardLikeButtonClassName = (\r\n    `card__like ${isLiked ? 'card__like_black' : ''}`\r\n  ); \r\n\r\n  function handleClick() {\r\n    onCardClick(card);\r\n  } \r\n  \r\n  function handleLikeClick() {\r\n    onCardLike(card);\r\n  } \r\n\r\n  function handleCardDelete() {\r\n    onCardDelete(card);\r\n  } \r\n  \r\n  function errorLoadImg(evt){\r\n    evt.target.src=errorImg;\r\n  };\r\n  \r\n  return (\r\n    <li className=\"card\">\r\n      <img onError={errorLoadImg} src={card.link} alt={card.name} className=\"card__image\" onClick={handleClick}/>\r\n        <div className=\"card__image-subtitle\">\r\n          <h2 className=\"card__title\">{card.name}</h2>\r\n          <div className=\"card__like-info-container\">\r\n            <button type=\"button\" className={cardLikeButtonClassName} onClick={handleLikeClick}></button>\r\n            <p className=\"card__likes-number\">{card.likes.length}</p>\r\n          </div>\r\n        </div>\r\n      <button type=\"button\" className={cardDeleteButtonClassName} onClick={handleCardDelete}></button>\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default Card;","import React from \"react\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nimport Card from './Card';\r\n\r\nfunction Main({\r\n  onEditProfile,\r\n  onAddPlace,\r\n  onEditAvatar,\r\n  onCardClick,\r\n  cards,\r\n  onCardLike,\r\n  onCardDelete\r\n}) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  \r\n  return (\r\n    <main className=\"main\">\r\n      <section className=\"profile\">\r\n        <div className=\"profile__avatar-overlay\">\r\n          <img src={currentUser.avatar} alt=\"фото аватара профиля\" className=\"profile__photo\" onClick = {onEditAvatar} />\r\n        </div>\r\n        <div className=\"profile__text\">\r\n          <h1 className=\"profile__title\">{currentUser.name}</h1>\r\n            <button type=\"button\" className=\"profile__edit-button\" onClick={onEditProfile}></button>\r\n            <p className=\"profile__subtitle\">{currentUser.about}</p>\r\n        </div>\r\n        <button type=\"button\" className=\"profile__add-button\" onClick={onAddPlace}></button>\r\n      </section>\r\n           \r\n      <section className=\"cards-section\">\r\n        <ul className=\"cards\">\r\n        {cards.map(card => { return (\r\n          <Card key={card._id}\r\n           card={card}\r\n           onCardClick={onCardClick}\r\n           onCardLike={onCardLike}\r\n           onCardDelete ={onCardDelete} /> \r\n        )})}\r\n        </ul>\r\n      </section>\r\n    </main>\r\n  )\r\n}\r\n\r\nexport default Main;","function ImagePopup(props) {\r\n  return (\r\n    <section className={`popup popup-illustration-container ${props.card && 'popup_opened'}`}>\r\n      <figure className=\"popup-illustration\">\r\n          <img className=\"popup-illustration__img\" alt={props.card ? props.card.name : \"\"} src={props.card ? props.card.link : \"\"}/>\r\n          <figcaption className=\"popup-illustration__title\">{props.card ? props.card.name: \"\"}</figcaption>\r\n          <button type=\"button\" className=\"popup__close-button\" onClick={props.onClose}></button>    \r\n      </figure>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default ImagePopup;","function PopupWithForm(props) {\r\n  return (\r\n    <section className={`popup popup-${props.name} ${props.isOpen ? (\"popup_opened\") : (\"\")}`}>\r\n      <div className=\"popup__container\">\r\n        <h2 className=\"popup__title\">{props.title}</h2>\r\n        <form name={props.name} onSubmit={props.onSubmit} className=\"popup__form\" noValidate>\r\n          {props.children}\r\n          <button type=\"submit\" className=\"popup__submit-button\">{props.submitButtonTitle}</button>\r\n        </form>\r\n        <button type=\"button\" className=\"popup__close-button\" onClick={props.onClose}></button>\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default PopupWithForm;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser }) {\r\n  const [name, setName] = React.useState('');\r\n  const [description, setDescription] = React.useState('');\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  React.useEffect(() => {\r\n    currentUser.name !== undefined && setName(currentUser.name);\r\n    currentUser.about !== undefined && setDescription(currentUser.about);\r\n  }, [currentUser, isOpen]);\r\n\r\n  function handleChangeName(evt) {\r\n    setName(evt.target.value);\r\n  }\r\n\r\n  function handleChangeDescription(evt) {\r\n    setDescription(evt.target.value);\r\n  }\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    onUpdateUser({\r\n      name,\r\n      about: description,\r\n    });\r\n  } \r\n  \r\n  return (\r\n    <PopupWithForm title=\"Редактировать профиль\" name=\"edit-profile\" submitButtonTitle=\"Сохранить\" \r\n    isOpen={isOpen} \r\n    onClose={onClose}\r\n    onSubmit={handleSubmit}>\r\n      <input name=\"name\" type=\"text\" placeholder=\"Имя\" \r\n      value={name}\r\n      onChange={handleChangeName}\r\n      className=\"popup__input popup__input_type_name\" \r\n      required minLength=\"2\" maxLength=\"40\" />\r\n      <span className=\"name-input-error popup__error-message\"></span>\r\n      <input name=\"proffesion\" type=\"text\" placeholder=\"Занятие\" \r\n      value={description}\r\n      onChange={handleChangeDescription}\r\n      className=\"popup__input popup__input_type_profession\"\r\n      required minLength=\"2\" maxLength=\"200\" />\r\n      <span className=\"proffesion-input-error popup__error-message\"></span>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default EditProfilePopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateUser }) {\r\n  const avatar = React.useRef();\r\n\r\n  React.useEffect(()=>{\r\n    avatar.current.value = '';\r\n  }, [isOpen]);\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    onUpdateUser(avatar.current.value);\r\n  } \r\n  \r\n  return (\r\n    <PopupWithForm title=\"Обновить аватар\" name=\"edit-avatar\" submitButtonTitle=\"Сохранить\" isOpen={isOpen} onClose={onClose} onSubmit={handleSubmit}>\r\n      <input ref={avatar} name=\"image\" type=\"url\" placeholder=\"Ссылка на картинку\" className=\"popup__input popup__input_type_avtar-link\" required />\r\n      <span className=\"image-input-error popup__error-message\"></span>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default EditAvatarPopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction AddPlacePopup({ isOpen, onClose, onAddPlace }) {\r\n\r\n  const [name, setName] = React.useState('');\r\n  const [link, setLink] = React.useState('');\r\n\r\n  React.useEffect(()=>{\r\n    setName('');\r\n    setLink('');\r\n  }, [isOpen]);\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    onAddPlace({name, link})\r\n  }\r\n\r\n  function handleChangeName(evt) {\r\n    setName(evt.target.value);\r\n  }\r\n\r\n  function handleChangeLink(evt) {\r\n    setLink(evt.target.value);\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm title=\"Новое место\" name=\"add-card\" submitButtonTitle=\"Создать\" isOpen={isOpen} onClose={onClose} onSubmit={handleSubmit}>\r\n      <input name=\"name\" type=\"text\" placeholder=\"Название\"\r\n       value={name}\r\n       onChange={handleChangeName}\r\n       className=\"popup__input popup__input_type_name\" \r\n       required minLength=\"2\" maxLength=\"30\" />\r\n      <span className=\"name-input-error popup__error-message\"></span>\r\n      <input name=\"image\" type=\"url\" placeholder=\"Ссылка на картинку\" \r\n      value={link}\r\n      onChange={handleChangeLink}\r\n      className=\"popup__input popup__input_type_card-link\" required />\r\n      <span className=\"image-input-error popup__error-message\"></span>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default AddPlacePopup;","import React from 'react';\r\n\r\nfunction Login ({ onLogin }) {\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n\r\n  function handleChangeEmail(evt){\r\n    setEmail(evt.target.value);\r\n  }\r\n\r\n  function handleChangePassword(evt) {\r\n    setPassword(evt.target.value);\r\n  }\r\n\r\n  function handleLoginSubmit(evt) {\r\n    evt.preventDefault();\r\n    onLogin({ email, password });\r\n  }\r\n\r\n  return (\r\n    <section className=\"authentication\">\r\n      <form className=\"authentication__form\" onSubmit={handleLoginSubmit}>\r\n        <h2 className=\"authentication__title\">Вход</h2>\r\n        <input value={email} onChange={handleChangeEmail} name=\"email\" type=\"email\" placeholder=\"Email\" className=\"authentication__input\"/>\r\n        <input value={password} onChange={handleChangePassword} \r\n        name=\"password\" type=\"password\" placeholder=\"Пароль\" className=\"authentication__input\" autoComplete=\"on\"/>\r\n        <button  type=\"submit\" className=\"authentication__submit-button\">Войти</button>\r\n      </form>  \r\n    </section>\r\n  )\r\n}\r\n\r\nexport default Login;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Register ( { onRegister } ) {\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n\r\n  function handleChangeEmail(evt){\r\n    setEmail(evt.target.value);\r\n  }\r\n\r\n  function handleChangePassword(evt) {\r\n    setPassword(evt.target.value);\r\n  }\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    onRegister({ email, password });\r\n  }\r\n\r\n  return (\r\n    <section className=\"authentication\">\r\n      <form onSubmit={handleSubmit} className=\"authentication__form\">\r\n        <h2 className=\"authentication__title\">Регистрация</h2>\r\n        <input value={email} onChange={handleChangeEmail} name=\"email\" type=\"email\" placeholder=\"Email\" className=\"authentication__input\"/>\r\n        <input value={password} onChange={handleChangePassword} \r\n        name=\"password\" type=\"password\" placeholder=\"Пароль\" className=\"authentication__input\" autoComplete=\"on\" />\r\n        <button type=\"submit\" className=\"authentication__submit-button\">Зарегистрироваться</button>\r\n      </form>  \r\n      <p className=\"authentication__subtitle\">Уже зарегистрированы? <Link className=\"authentication__subtitle-link\" to='/sign-in'>Войти</Link></p>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default Register;","function Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">&copy; {new Date().getFullYear()} Mesto Russia</p>\r\n    </footer>\r\n  )\r\n}\r\n\r\nexport default Footer;","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nfunction ProtectedRoute({ component: Component, ...props }) {\r\n  return (\r\n    <Route>\r\n      {props.loggedIn ? <Component {...props} /> : <Redirect to=\"/sign-in\" />}\r\n    </Route>\r\n  )\r\n}\r\n\r\nexport default ProtectedRoute; ","export default __webpack_public_path__ + \"static/media/registration_ok.e004e6e7.svg\";","export default __webpack_public_path__ + \"static/media/registration_err.471086c8.svg\";","import registrationOk from '../images/registration_ok.svg'\r\nimport registrationErr from '../images/registration_err.svg'\r\nfunction InfoTooltip({isOpen, onClose, isRegistration}) {\r\n  return (\r\n    <section className={`popup popup-illustration-container ${isOpen && 'popup_opened'}`}>\r\n      <div className=\"popup__container\">\r\n        <img className=\"info-tooltip__img\" alt=\"Ошибка\" src={isRegistration ? registrationOk : registrationErr}/>\r\n        <p className=\"info-tooltip__text\">{isRegistration ? \"Вы успешно зарегистрировались!\" : \"Что-то пошло не так!Попробуйте ещё раз.\"}</p>\r\n        <button type=\"button\" className=\"popup__close-button\" onClick={onClose}></button>    \r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default InfoTooltip","import {\r\n  server,\r\n  token\r\n} from \"./constants.js\";\r\n\r\nclass Api {\r\n  constructor (options) {\r\n    this._baseUrl = options.baseUrl;\r\n    this._headers = options.headers;\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    if (res.ok) {\r\n        return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка ${res.status} : ${res.statusText}`);\r\n  }\r\n\r\n  _fetch(url) {\r\n    return fetch(`${this._baseUrl}${url}`, {\r\n      headers: this._headers\r\n    })\r\n    .then(this._checkResponse);\r\n  }\r\n  \r\n  getInitialCards(url='/cards') {\r\n    return this._fetch(url);\r\n  }\r\n\r\n  getProfile(url='/users/me') {\r\n    return this._fetch(url)\r\n  }\r\n\r\n  updateProfile(name, about) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: name,\r\n        about: about\r\n      })\r\n    }).then(this._checkResponse); \r\n  }\r\n\r\n  addCard(name, link) {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: 'POST',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: name,\r\n        link: link\r\n      })\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  removeCard(cardId){\r\n    return fetch(`${this._baseUrl}/cards/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: this._headers,\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  likeCard(cardId) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\r\n      method: 'PUT',\r\n      headers: this._headers,\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  removeLike(cardId) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: this._headers,\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  changeLikeCardStatus(cardId, isLiked) {\r\n    if(isLiked) {\r\n      return api.likeCard(cardId)\r\n    }\r\n    else return api.removeLike(cardId)\r\n  }\r\n\r\n  udpateAvatar(avatar) {\r\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        avatar: avatar,\r\n      })\r\n    }).then(this._checkResponse);\r\n  }\r\n}\r\n\r\nexport const api = new Api({\r\n  baseUrl: server,\r\n  headers: {\r\n    authorization: token,\r\n    'Content-Type': 'application/json'\r\n  }\r\n});","export const token = '2e08f9f0-442c-48d2-af92-1c14d5165bb1';\r\nexport const server = 'https://mesto.nomoreparties.co/v1/cohort-21';\r\nexport const serverAuth = 'https://auth.nomoreparties.co';","import { serverAuth } from './constants';\r\n\r\nclass ApiAuth {\r\n  constructor (options) {\r\n    this._baseUrl = options.baseUrl;\r\n    this._headers = options.headers;\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    if (res.ok) {\r\n        return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка ${res.status} : ${res.statusText}`);\r\n  }\r\n  \r\n  register(password, email) {\r\n    return fetch(`${this._baseUrl}/signup`, {\r\n      method: 'POST',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        \"password\": password,\r\n        \"email\": email\r\n      })\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  signin(password, email) {\r\n    return fetch(`${this._baseUrl}/signin`, {\r\n      method: 'POST',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        \"password\": password,\r\n        \"email\": email\r\n      })\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  checkToken(token) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: 'GET',\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\" : `Bearer ${token}`\r\n      } ,\r\n    }).then(this._checkResponse);\r\n  }\r\n}\r\n\r\nexport const apiAuth = new ApiAuth({\r\n  baseUrl: serverAuth,\r\n  headers: {\r\n    'Content-Type': 'application/json'\r\n  }\r\n});","import React from 'react';\r\nimport { Redirect, Route, Switch, useHistory} from 'react-router-dom'\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport ImagePopup from './ImagePopup';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport Login from './Login';\r\nimport Register from './Register';\r\nimport Footer from './Footer';\r\nimport ProtectedRoute from './ProtectedRoute';\r\nimport InfoTooltip from './InfoTooltip';\r\nimport { api } from '../utils/api';\r\nimport { apiAuth } from '../utils/apiAuth';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction App() {\r\n  const [loggedIn, setloggedIn] = React.useState(false);\r\n  const [isEditProfilePopupOpen, setEditProfilePopupOpenActive] = React.useState(false);\r\n  const [isAddPlacePopupOpen, setAddPlacePopupOpenActive] = React.useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpenActive] = React.useState(false);\r\n  const [selectedCard, setSelectedCard] = React.useState(null);\r\n  const [currentUser, setCurrentUser] = React.useState({});\r\n  const [cards, setCards] = React.useState([]);\r\n  const [isInfoTooltipPopupOpen, setIsInfoTooltipPopupOpen] = React.useState(false);\r\n  const [isRegistration, setIsRegistration] = React.useState(false);\r\n  const [userEmail, setUserEmail] = React.useState('');\r\n\r\n  const history = useHistory();\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n    \r\n    api.changeLikeCardStatus(card._id, !isLiked).then((newCard) => {\r\n      setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\r\n    }).catch(err => console.log('Ошибка ' + err));\r\n  } \r\n\r\n  function handleCardDelete(card) {\r\n    api.removeCard(card._id).then(() => {\r\n      setCards((state) => state.filter((c) => c._id !== card._id));\r\n    }).catch(err => console.log('Ошибка ' + err));;\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    api.getInitialCards()\r\n    .then((cards) => {\r\n      setCards(cards);\r\n    })\r\n    .catch(err => console.log('Ошибка ' + err));\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    api.getProfile()\r\n    .then((profile) => {\r\n      setCurrentUser(profile);\r\n    })\r\n    .catch(err => console.log('Ошибка ' + err));\r\n  }, []);\r\n\r\n  function handleCardClick(card) {\r\n    setSelectedCard(card);\r\n  }\r\n  function handleEditProfileClick() {\r\n    setEditProfilePopupOpenActive(true);\r\n  }\r\n  function handleAddPlaceClick() {\r\n    setAddPlacePopupOpenActive(true);\r\n  }\r\n  function handleEditAvatarClick() {\r\n    setIsEditAvatarPopupOpenActive(true);\r\n  }\r\n  \r\n  function closeAllPopups() {\r\n    setIsEditAvatarPopupOpenActive(false);\r\n    setAddPlacePopupOpenActive(false);\r\n    setEditProfilePopupOpenActive(false);\r\n    setIsInfoTooltipPopupOpen(false);\r\n    setSelectedCard(null);\r\n  }\r\n  function handleUpdateUser({ name, about }) {\r\n    api.updateProfile(name, about)\r\n    .then((profile) => {\r\n      setCurrentUser(profile);\r\n      closeAllPopups();\r\n    })\r\n    .catch(err => console.log('Ошибка ' + err));\r\n  }\r\n\r\n  function handleUpdateAvatar(avatar) {\r\n    api.udpateAvatar(avatar)\r\n    .then((profile) => {\r\n      setCurrentUser(profile);\r\n      closeAllPopups();\r\n    })\r\n    .catch(err => console.log('Ошибка ' + err));\r\n  }\r\n\r\n  function handleAddPlaceSubmit({name, link}) {\r\n    api.addCard(name, link)\r\n    .then((card) => {\r\n      setCards([card, ...cards])\r\n      closeAllPopups();\r\n    })\r\n    .catch(err => console.log('Ошибка ' + err));\r\n  }\r\n\r\n  function handleSignIn({ password, email }) {\r\n    apiAuth.signin(password, email)\r\n    .then((res) => {\r\n      setloggedIn(true);\r\n      setUserEmail(email);\r\n      localStorage.setItem('token', res.token);\r\n      history.push(\"/\");\r\n    })\r\n    .catch((err) =>  {\r\n      console.log('Ошибка ' + err);\r\n    });\r\n  }\r\n\r\n  function handleRegister( { password, email} ) {\r\n    apiAuth.register(password, email)\r\n    .then(() => {\r\n      setIsRegistration(true);\r\n      setIsInfoTooltipPopupOpen(true);\r\n      history.push(\"/sign-in\");\r\n    })\r\n    .catch((err) => {\r\n      setIsRegistration(false);\r\n      setIsInfoTooltipPopupOpen(true);\r\n      console.log('Ошибка ' + err);\r\n    });\r\n  }\r\n\r\n  function tokenCheck() {\r\n    const token = localStorage.getItem('token')\r\n    if (!token) {\r\n      return;\r\n    }\r\n\r\n    apiAuth.checkToken(token)\r\n    .then(({ data }) => {\r\n      setloggedIn(true);\r\n      setUserEmail(data.email);\r\n    })\r\n    .catch((err) => console.log('Ошибка ' + err));\r\n  }\r\n\r\n  function onLogOut() {\r\n    localStorage.removeItem(\"token\");\r\n    setloggedIn(false);\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    tokenCheck()\r\n  }, []);\r\n\r\n  React.useEffect(() =>{\r\n    history.push(\"/\");\r\n  }, [loggedIn]);\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"body\">\r\n        <div className=\"page\">\r\n        <Header userEmail={userEmail} onLogOut={onLogOut} />\r\n          <Switch>\r\n            <ProtectedRoute \r\n              exact path=\"/\"\r\n              loggedIn={loggedIn}\r\n              component={Main}\r\n              onEditProfile={handleEditProfileClick}\r\n              onAddPlace={handleAddPlaceClick}\r\n              onEditAvatar={handleEditAvatarClick}\r\n              onCardClick={handleCardClick}\r\n              cards={cards}\r\n              onCardLike={handleCardLike}\r\n              onCardDelete={handleCardDelete} /> \r\n            <Route path=\"/sign-up\">\r\n              <Register onRegister={handleRegister} />\r\n            </Route>\r\n            <Route path=\"/sign-in\">\r\n              <Login onLogin={handleSignIn} />\r\n            </Route>\r\n            <Route path=\"*\">\r\n              {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/sign-in\" /> }\r\n            </Route>\r\n          </Switch>\r\n          <Footer />\r\n          <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser} />\r\n          <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlaceSubmit} />\r\n          <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateAvatar} />\r\n          <ImagePopup card={selectedCard} onClose={closeAllPopups} />\r\n          <InfoTooltip isOpen={isInfoTooltipPopupOpen} onClose={closeAllPopups} isRegistration={isRegistration} />\r\n        </div>\r\n      </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport { BrowserRouter } from 'react-router-dom';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}